# 号码资源状态与操作关系思维导图

## 思维导图

```svg
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <style>
      .central-node { fill: #1976d2; stroke: #0d47a1; stroke-width: 3; }
      .status-node { fill: #4fc3f7; stroke: #0288d1; stroke-width: 2; }
      .operation-node { fill: #81c784; stroke: #388e3c; stroke-width: 2; }
      .rule-node { fill: #ffb74d; stroke: #f57c00; stroke-width: 2; }
      .constraint-node { fill: #f48fb1; stroke: #c2185b; stroke-width: 2; }
      .central-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; fill: white; }
      .node-text { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .small-text { font-family: Arial, sans-serif; font-size: 9px; text-anchor: middle; }
      .connection { stroke: #666; stroke-width: 2; }
      .thick-connection { stroke: #333; stroke-width: 3; }
    </style>
  </defs>
  
  <!-- 中心节点 -->
  <ellipse cx="600" cy="400" rx="80" ry="40" class="central-node" />
  <text x="600" y="405" class="central-text">号码资源</text>
  <text x="600" y="420" class="central-text">状态管理</text>
  
  <!-- 状态分支 -->
  <g id="status-branch">
    <text x="200" y="50" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">状态枚举</text>
    
    <!-- 空闲 -->
    <ellipse cx="100" cy="100" rx="50" ry="25" class="status-node" />
    <text x="100" y="105" class="node-text">空闲(1)</text>
    
    <!-- 预留 -->
    <ellipse cx="200" cy="120" rx="50" ry="25" class="status-node" />
    <text x="200" y="125" class="node-text">预留(2)</text>
    
    <!-- 已分配 -->
    <ellipse cx="300" cy="100" rx="50" ry="25" class="status-node" />
    <text x="300" y="105" class="node-text">已分配(3)</text>
    
    <!-- 已激活 -->
    <ellipse cx="150" cy="180" rx="50" ry="25" class="status-node" />
    <text x="150" y="185" class="node-text">已激活(4)</text>
    
    <!-- 已使用 -->
    <ellipse cx="250" cy="200" rx="50" ry="25" class="status-node" />
    <text x="250" y="205" class="node-text">已使用(5)</text>
    
    <!-- 已冻结 -->
    <ellipse cx="100" cy="250" rx="50" ry="25" class="status-node" />
    <text x="100" y="255" class="node-text">已冻结(6)</text>
    
    <!-- 已锁定 -->
    <ellipse cx="300" cy="250" rx="50" ry="25" class="status-node" />
    <text x="300" y="255" class="node-text">已锁定(7)</text>
  </g>
  
  <!-- 操作分支 -->
  <g id="operation-branch">
    <text x="1000" y="50" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">操作类型</text>
    
    <!-- 预留 -->
    <rect x="900" y="80" width="60" height="30" class="operation-node" />
    <text x="930" y="100" class="node-text">预留</text>
    
    <!-- 分配 -->
    <rect x="980" y="80" width="60" height="30" class="operation-node" />
    <text x="1010" y="100" class="node-text">分配</text>
    
    <!-- 激活 -->
    <rect x="1060" y="80" width="60" height="30" class="operation-node" />
    <text x="1090" y="100" class="node-text">激活</text>
    
    <!-- 冻结 -->
    <rect x="900" y="130" width="60" height="30" class="operation-node" />
    <text x="930" y="150" class="node-text">冻结</text>
    
    <!-- 解冻 -->
    <rect x="980" y="130" width="60" height="30" class="operation-node" />
    <text x="1010" y="150" class="node-text">解冻</text>
    
    <!-- 释放 -->
    <rect x="1060" y="130" width="60" height="30" class="operation-node" />
    <text x="1090" y="150" class="node-text">释放</text>
    
    <!-- 回收 -->
    <rect x="900" y="180" width="60" height="30" class="operation-node" />
    <text x="930" y="200" class="node-text">回收</text>
    
    <!-- 修改 -->
    <rect x="980" y="180" width="60" height="30" class="operation-node" />
    <text x="1010" y="200" class="node-text">修改</text>
    
    <!-- 删除 -->
    <rect x="1060" y="180" width="60" height="30" class="operation-node" />
    <text x="1090" y="200" class="node-text">删除</text>
  </g>
  
  <!-- 业务规则分支 -->
  <g id="rules-branch">
    <text x="200" y="550" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">业务规则</text>
    
    <!-- 单向性原则 -->
    <rect x="50" y="580" width="100" height="40" class="rule-node" />
    <text x="100" y="595" class="small-text">单向性原则</text>
    <text x="100" y="610" class="small-text">状态转换不可逆</text>
    
    <!-- 权限控制 -->
    <rect x="170" y="580" width="100" height="40" class="rule-node" />
    <text x="220" y="595" class="small-text">权限控制</text>
    <text x="220" y="610" class="small-text">操作需要权限</text>
    
    <!-- 数据完整性 -->
    <rect x="290" y="580" width="100" height="40" class="rule-node" />
    <text x="340" y="595" class="small-text">数据完整性</text>
    <text x="340" y="610" class="small-text">维护数据一致</text>
    
    <!-- 审计追踪 -->
    <rect x="50" y="640" width="100" height="40" class="rule-node" />
    <text x="100" y="655" class="small-text">审计追踪</text>
    <text x="100" y="670" class="small-text">记录操作日志</text>
    
    <!-- 事务控制 -->
    <rect x="170" y="640" width="100" height="40" class="rule-node" />
    <text x="220" y="655" class="small-text">事务控制</text>
    <text x="220" y="670" class="small-text">保证原子性</text>
    
    <!-- 状态检查 -->
    <rect x="290" y="640" width="100" height="40" class="rule-node" />
    <text x="340" y="655" class="small-text">状态检查</text>
    <text x="340" y="670" class="small-text">验证前置条件</text>
  </g>
  
  <!-- 约束条件分支 -->
  <g id="constraints-branch">
    <text x="1000" y="550" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">约束条件</text>
    
    <!-- 解冻限制 -->
    <rect x="850" y="580" width="100" height="40" class="constraint-node" />
    <text x="900" y="595" class="small-text">解冻限制</text>
    <text x="900" y="610" class="small-text">固定恢复激活</text>
    
    <!-- 回收特殊性 -->
    <rect x="970" y="580" width="100" height="40" class="constraint-node" />
    <text x="1020" y="595" class="small-text">回收特殊性</text>
    <text x="1020" y="610" class="small-text">可从任意状态</text>
    
    <!-- 锁定处理 -->
    <rect x="1090" y="580" width="100" height="40" class="constraint-node" />
    <text x="1140" y="595" class="small-text">锁定处理</text>
    <text x="1140" y="610" class="small-text">只能回收解除</text>
    
    <!-- 并发控制 -->
    <rect x="850" y="640" width="100" height="40" class="constraint-node" />
    <text x="900" y="655" class="small-text">并发控制</text>
    <text x="900" y="670" class="small-text">乐观锁机制</text>
    
    <!-- 统计同步 -->
    <rect x="970" y="640" width="100" height="40" class="constraint-node" />
    <text x="1020" y="655" class="small-text">统计同步</text>
    <text x="1020" y="670" class="small-text">更新号段统计</text>
    
    <!-- 异常处理 -->
    <rect x="1090" y="640" width="100" height="40" class="constraint-node" />
    <text x="1140" y="655" class="small-text">异常处理</text>
    <text x="1140" y="670" class="small-text">业务异常回滚</text>
  </g>
  
  <!-- 核心流程分支 -->
  <g id="process-branch">
    <text x="600" y="150" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">核心流程</text>
    
    <!-- 状态检查 -->
    <ellipse cx="500" cy="200" rx="60" ry="25" class="rule-node" />
    <text x="500" y="205" class="node-text">状态检查</text>
    
    <!-- 业务逻辑 -->
    <ellipse cx="600" cy="200" rx="60" ry="25" class="rule-node" />
    <text x="600" y="205" class="node-text">业务逻辑</text>
    
    <!-- 数据更新 -->
    <ellipse cx="700" cy="200" rx="60" ry="25" class="rule-node" />
    <text x="700" y="205" class="node-text">数据更新</text>
    
    <!-- 日志记录 -->
    <ellipse cx="550" cy="260" rx="60" ry="25" class="rule-node" />
    <text x="550" y="265" class="node-text">日志记录</text>
    
    <!-- 统计更新 -->
    <ellipse cx="650" cy="260" rx="60" ry="25" class="rule-node" />
    <text x="650" y="265" class="node-text">统计更新</text>
  </g>
  
  <!-- 连接线 -->
  <!-- 中心到各分支的主连接 -->
  <line x1="520" y1="400" x2="200" y2="300" class="thick-connection" />
  <line x1="680" y1="400" x2="1000" y2="300" class="thick-connection" />
  <line x1="600" y1="440" x2="200" y2="550" class="thick-connection" />
  <line x1="600" y1="440" x2="1000" y2="550" class="thick-connection" />
  <line x1="600" y1="360" x2="600" y2="300" class="thick-connection" />
  
  <!-- 状态内部连接 -->
  <line x1="150" y1="100" x2="200" y2="120" class="connection" />
  <line x1="250" y1="120" x2="300" y2="100" class="connection" />
  <line x1="200" y1="145" x2="150" y2="180" class="connection" />
  <line x1="300" y1="125" x2="250" y2="200" class="connection" />
  <line x1="150" y1="205" x2="100" y2="250" class="connection" />
  <line x1="250" y1="225" x2="300" y2="250" class="connection" />
  
  <!-- 流程内部连接 -->
  <line x1="560" y1="200" x2="600" y2="200" class="connection" />
  <line x1="640" y1="200" x2="700" y2="200" class="connection" />
  <line x1="580" y1="220" x2="550" y2="260" class="connection" />
  <line x1="620" y1="220" x2="650" y2="260" class="connection" />
  
  <!-- 标题 -->
  <text x="600" y="30" style="font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle;">号码资源状态与操作关系思维导图</text>
  
  <!-- 图例 -->
  <g id="legend">
    <text x="50" y="750" style="font-family: Arial, sans-serif; font-size: 14px; font-weight: bold;">图例：</text>
    
    <ellipse cx="120" cy="770" rx="25" ry="12" class="central-node" />
    <text x="160" y="775" style="font-family: Arial, sans-serif; font-size: 12px;">核心概念</text>
    
    <ellipse cx="250" cy="770" rx="25" ry="12" class="status-node" />
    <text x="290" y="775" style="font-family: Arial, sans-serif; font-size: 12px;">状态枚举</text>
    
    <rect x="370" y="760" width="30" height="20" class="operation-node" />
    <text x="410" y="775" style="font-family: Arial, sans-serif; font-size: 12px;">操作类型</text>
    
    <rect x="490" y="760" width="30" height="20" class="rule-node" />
    <text x="530" y="775" style="font-family: Arial, sans-serif; font-size: 12px;">业务规则</text>
    
    <rect x="610" y="760" width="30" height="20" class="constraint-node" />
    <text x="650" y="775" style="font-family: Arial, sans-serif; font-size: 12px;">约束条件</text>
  </g>
</svg>
```

## 状态转换矩阵图

```svg
<svg width="1000" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .matrix-header { fill: #1976d2; stroke: #0d47a1; stroke-width: 1; }
      .matrix-cell-allow { fill: #4caf50; stroke: #388e3c; stroke-width: 1; }
      .matrix-cell-deny { fill: #f44336; stroke: #d32f2f; stroke-width: 1; }
      .matrix-cell-special { fill: #ff9800; stroke: #f57c00; stroke-width: 1; }
      .header-text { font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; fill: white; font-weight: bold; }
      .cell-text { font-family: Arial, sans-serif; font-size: 9px; text-anchor: middle; }
      .allow-text { fill: white; font-weight: bold; }
      .deny-text { fill: white; }
      .special-text { fill: white; font-weight: bold; }
    </style>
  </defs>
  
  <!-- 标题 -->
  <text x="500" y="30" style="font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle;">号码状态与操作转换矩阵</text>
  
  <!-- 表头 -->
  <rect x="50" y="60" width="80" height="40" class="matrix-header" />
  <text x="90" y="85" class="header-text">当前状态\操作</text>
  
  <!-- 操作列标题 -->
  <rect x="130" y="60" width="80" height="40" class="matrix-header" />
  <text x="170" y="85" class="header-text">预留</text>
  
  <rect x="210" y="60" width="80" height="40" class="matrix-header" />
  <text x="250" y="85" class="header-text">分配</text>
  
  <rect x="290" y="60" width="80" height="40" class="matrix-header" />
  <text x="330" y="85" class="header-text">激活</text>
  
  <rect x="370" y="60" width="80" height="40" class="matrix-header" />
  <text x="410" y="85" class="header-text">冻结</text>
  
  <rect x="450" y="60" width="80" height="40" class="matrix-header" />
  <text x="490" y="85" class="header-text">解冻</text>
  
  <rect x="530" y="60" width="80" height="40" class="matrix-header" />
  <text x="570" y="85" class="header-text">释放</text>
  
  <rect x="610" y="60" width="80" height="40" class="matrix-header" />
  <text x="650" y="85" class="header-text">回收</text>
  
  <rect x="690" y="60" width="80" height="40" class="matrix-header" />
  <text x="730" y="85" class="header-text">修改</text>
  
  <rect x="770" y="60" width="80" height="40" class="matrix-header" />
  <text x="810" y="85" class="header-text">删除</text>
  
  <!-- 状态行 -->
  <!-- 空闲(1) -->
  <rect x="50" y="100" width="80" height="40" class="matrix-header" />
  <text x="90" y="125" class="header-text">空闲(1)</text>
  
  <rect x="130" y="100" width="80" height="40" class="matrix-cell-allow" />
  <text x="170" y="125" class="cell-text allow-text">✓→预留</text>
  
  <rect x="210" y="100" width="80" height="40" class="matrix-cell-allow" />
  <text x="250" y="125" class="cell-text allow-text">✓→已分配</text>
  
  <rect x="290" y="100" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="125" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="100" width="80" height="40" class="matrix-cell-deny" />
  <text x="410" y="125" class="cell-text deny-text">✗</text>
  
  <rect x="450" y="100" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="125" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="100" width="80" height="40" class="matrix-cell-deny" />
  <text x="570" y="125" class="cell-text deny-text">✗</text>
  
  <rect x="610" y="100" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="125" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="100" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="125" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="100" width="80" height="40" class="matrix-cell-allow" />
  <text x="810" y="125" class="cell-text allow-text">✓</text>
  
  <!-- 预留(2) -->
  <rect x="50" y="140" width="80" height="40" class="matrix-header" />
  <text x="90" y="165" class="header-text">预留(2)</text>
  
  <rect x="130" y="140" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="165" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="140" width="80" height="40" class="matrix-cell-allow" />
  <text x="250" y="165" class="cell-text allow-text">✓→已分配</text>
  
  <rect x="290" y="140" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="165" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="140" width="80" height="40" class="matrix-cell-deny" />
  <text x="410" y="165" class="cell-text deny-text">✗</text>
  
  <rect x="450" y="140" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="165" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="140" width="80" height="40" class="matrix-cell-deny" />
  <text x="570" y="165" class="cell-text deny-text">✗</text>
  
  <rect x="610" y="140" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="165" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="140" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="165" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="140" width="80" height="40" class="matrix-cell-allow" />
  <text x="810" y="165" class="cell-text allow-text">✓</text>
  
  <!-- 已分配(3) -->
  <rect x="50" y="180" width="80" height="40" class="matrix-header" />
  <text x="90" y="205" class="header-text">已分配(3)</text>
  
  <rect x="130" y="180" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="205" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="180" width="80" height="40" class="matrix-cell-deny" />
  <text x="250" y="205" class="cell-text deny-text">✗</text>
  
  <rect x="290" y="180" width="80" height="40" class="matrix-cell-allow" />
  <text x="330" y="205" class="cell-text allow-text">✓→已激活</text>
  
  <rect x="370" y="180" width="80" height="40" class="matrix-cell-deny" />
  <text x="410" y="205" class="cell-text deny-text">✗</text>
  
  <rect x="450" y="180" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="205" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="180" width="80" height="40" class="matrix-cell-allow" />
  <text x="570" y="205" class="cell-text allow-text">✓→空闲</text>
  
  <rect x="610" y="180" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="205" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="180" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="205" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="180" width="80" height="40" class="matrix-cell-deny" />
  <text x="810" y="205" class="cell-text deny-text">✗</text>
  
  <!-- 已激活(4) -->
  <rect x="50" y="220" width="80" height="40" class="matrix-header" />
  <text x="90" y="245" class="header-text">已激活(4)</text>
  
  <rect x="130" y="220" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="245" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="220" width="80" height="40" class="matrix-cell-deny" />
  <text x="250" y="245" class="cell-text deny-text">✗</text>
  
  <rect x="290" y="220" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="245" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="220" width="80" height="40" class="matrix-cell-allow" />
  <text x="410" y="245" class="cell-text allow-text">✓→已冻结</text>
  
  <rect x="450" y="220" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="245" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="220" width="80" height="40" class="matrix-cell-allow" />
  <text x="570" y="245" class="cell-text allow-text">✓→空闲</text>
  
  <rect x="610" y="220" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="245" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="220" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="245" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="220" width="80" height="40" class="matrix-cell-deny" />
  <text x="810" y="245" class="cell-text deny-text">✗</text>
  
  <!-- 已使用(5) -->
  <rect x="50" y="260" width="80" height="40" class="matrix-header" />
  <text x="90" y="285" class="header-text">已使用(5)</text>
  
  <rect x="130" y="260" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="285" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="260" width="80" height="40" class="matrix-cell-deny" />
  <text x="250" y="285" class="cell-text deny-text">✗</text>
  
  <rect x="290" y="260" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="285" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="260" width="80" height="40" class="matrix-cell-allow" />
  <text x="410" y="285" class="cell-text allow-text">✓→已冻结</text>
  
  <rect x="450" y="260" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="285" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="260" width="80" height="40" class="matrix-cell-allow" />
  <text x="570" y="285" class="cell-text allow-text">✓→空闲</text>
  
  <rect x="610" y="260" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="285" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="260" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="285" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="260" width="80" height="40" class="matrix-cell-deny" />
  <text x="810" y="285" class="cell-text deny-text">✗</text>
  
  <!-- 已冻结(6) -->
  <rect x="50" y="300" width="80" height="40" class="matrix-header" />
  <text x="90" y="325" class="header-text">已冻结(6)</text>
  
  <rect x="130" y="300" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="325" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="300" width="80" height="40" class="matrix-cell-deny" />
  <text x="250" y="325" class="cell-text deny-text">✗</text>
  
  <rect x="290" y="300" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="325" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="300" width="80" height="40" class="matrix-cell-deny" />
  <text x="410" y="325" class="cell-text deny-text">✗</text>
  
  <rect x="450" y="300" width="80" height="40" class="matrix-cell-allow" />
  <text x="490" y="325" class="cell-text allow-text">✓→已激活</text>
  
  <rect x="530" y="300" width="80" height="40" class="matrix-cell-allow" />
  <text x="570" y="325" class="cell-text allow-text">✓→空闲</text>
  
  <rect x="610" y="300" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="325" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="300" width="80" height="40" class="matrix-cell-allow" />
  <text x="730" y="325" class="cell-text allow-text">✓</text>
  
  <rect x="770" y="300" width="80" height="40" class="matrix-cell-deny" />
  <text x="810" y="325" class="cell-text deny-text">✗</text>
  
  <!-- 已锁定(7) -->
  <rect x="50" y="340" width="80" height="40" class="matrix-header" />
  <text x="90" y="365" class="header-text">已锁定(7)</text>
  
  <rect x="130" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="170" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="210" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="250" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="290" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="330" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="370" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="410" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="450" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="490" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="530" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="570" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="610" y="340" width="80" height="40" class="matrix-cell-special" />
  <text x="650" y="365" class="cell-text special-text">✓→空闲</text>
  
  <rect x="690" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="730" y="365" class="cell-text deny-text">✗</text>
  
  <rect x="770" y="340" width="80" height="40" class="matrix-cell-deny" />
  <text x="810" y="365" class="cell-text deny-text">✗</text>
  
  <!-- 图例 -->
  <g id="matrix-legend">
    <text x="50" y="420" style="font-family: Arial, sans-serif; font-size: 14px; font-weight: bold;">图例：</text>
    
    <rect x="50" y="440" width="30" height="20" class="matrix-cell-allow" />
    <text x="90" y="455" style="font-family: Arial, sans-serif; font-size: 12px;">✓ 允许操作</text>
    
    <rect x="180" y="440" width="30" height="20" class="matrix-cell-deny" />
    <text x="220" y="455" style="font-family: Arial, sans-serif; font-size: 12px;">✗ 禁止操作</text>
    
    <rect x="310" y="440" width="30" height="20" class="matrix-cell-special" />
    <text x="350" y="455" style="font-family: Arial, sans-serif; font-size: 12px;">特殊操作（回收）</text>
    
    <text x="50" y="480" style="font-family: Arial, sans-serif; font-size: 11px;">→ 表示操作后的目标状态</text>
  </g>
</svg>
```

## 关键要点总结

### 1. 状态转换特点
- **严格的前置条件检查**：每个操作都有明确的状态要求
- **单向转换为主**：大部分状态转换是不可逆的
- **回收操作特殊性**：可以从任意状态回收到空闲状态

### 2. 业务约束
- **解冻固定恢复**：解冻操作固定恢复为"已激活"状态
- **锁定状态限制**：已锁定状态只能通过回收操作解除
- **数据一致性**：状态变更时同步更新相关信息

### 3. 实现机制
- **事务控制**：保证操作的原子性
- **乐观锁**：防止并发冲突
- **操作日志**：完整的审计追踪
- **统计同步**：实时更新号段统计信息

这个思维导图和矩阵图清晰地展示了号码资源状态管理系统的核心逻辑和约束关系，为系统维护和优化提供了重要参考。