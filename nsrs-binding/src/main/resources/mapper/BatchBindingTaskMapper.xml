<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nsrs.binding.mapper.BatchBindingTaskMapper">

    <!-- 结果映射 -->
    <resultMap id="BaseResultMap" type="com.nsrs.binding.entity.BatchBindingTask">
        <id column="task_id" property="taskId" jdbcType="BIGINT"/>
        <result column="task_name" property="taskName" jdbcType="VARCHAR"/>
        <result column="task_type" property="taskType" jdbcType="INTEGER"/>
        <result column="file_path" property="filePath" jdbcType="VARCHAR"/>
        <result column="total_count" property="totalCount" jdbcType="INTEGER"/>
        <result column="success_count" property="successCount" jdbcType="INTEGER"/>
        <result column="fail_count" property="failCount" jdbcType="INTEGER"/>
        <result column="status" property="status" jdbcType="INTEGER"/>
        <result column="error_msg" property="errorMsg" jdbcType="VARCHAR"/>
        <result column="start_time" property="startTime" jdbcType="TIMESTAMP"/>
        <result column="end_time" property="endTime" jdbcType="TIMESTAMP"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="create_user_id" property="createUserId" jdbcType="BIGINT"/>
        <result column="update_user_id" property="updateUserId" jdbcType="BIGINT"/>
    </resultMap>

    <!-- 基础字段列表 -->
    <sql id="Base_Column_List">
        task_id, task_name, task_type, file_path, total_count, success_count, fail_count,
        status, error_msg, start_time, end_time, create_time, update_time, create_user_id, update_user_id
    </sql>

    <!-- 根据任务ID查询任务详情 -->
    <select id="selectTaskDetailById" parameterType="java.lang.Long" resultMap="BaseResultMap">
        SELECT 
            <include refid="Base_Column_List"/>
        FROM batch_binding_task
        WHERE task_id = #{taskId}
    </select>

</mapper>